get:
  tags:
    - Transactions
  summary: Get transaction details by ID
  operationId: getTransactionDetail
  parameters:
    - $ref: "../components/parameters/groupIdPath.yaml"
    - $ref: "../components/parameters/transactionIdPath.yaml"
  responses:
    "200":
      description: Transaction details retrieved successfully
      content:
        application/json:
          schema:
            $ref: "../components/schemas/responses/TransactionResponse.yaml"
    "400":
      description: Validation error - Invalid UUID format
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "401":
      description: Unauthorized - Invalid or missing Firebase JWT token
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "404":
      description: Transaction not found
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"

put:
  tags:
    - Transactions
  summary: Update a LOAN transaction
  description: >
    Updates an existing LOAN transaction with new details.

    **Updatable fields:**
    - Title, amount, currency, transaction date
    - Payer
    - Obligations (users and amounts)

    **Important notes:**
    - Only LOAN transactions can be updated
    - Currency can be changed (e.g., from JPY to USD)
    - All existing obligations will be replaced with new ones
  operationId: updateTransaction
  parameters:
    - $ref: "../components/parameters/groupIdPath.yaml"
    - $ref: "../components/parameters/transactionIdPath.yaml"
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: "../components/schemas/requests/UpdateTransactionRequest.yaml"
  responses:
    "200":
      description: Transaction updated successfully
      content:
        application/json:
          schema:
            $ref: "../components/schemas/responses/TransactionResponse.yaml"
    "400":
      description: Validation error - Invalid request parameters or attempting to update REPAYMENT transaction
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "401":
      description: Unauthorized - Invalid or missing Firebase JWT token
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "404":
      description: Transaction not found
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "415":
      description: Unsupported Media Type - Content-Type must be application/json
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"

delete:
  tags:
    - Transactions
  summary: Delete a transaction
  operationId: deleteTransaction
  parameters:
    - $ref: "../components/parameters/groupIdPath.yaml"
    - $ref: "../components/parameters/transactionIdPath.yaml"
  responses:
    "204":
      description: Transaction deleted successfully
    "400":
      description: Validation error - Invalid UUID format
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "401":
      description: Unauthorized - Invalid or missing Firebase JWT token
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "403":
      description: Forbidden - User doesn't have permission to delete this transaction
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
    "404":
      description: Transaction not found
      content:
        application/json:
          schema:
            $ref: "../components/schemas/errors/ErrorResponse.yaml"
