# Common Configuration
spring.application.name=tateca-backend

# Default Profile for local development
spring.profiles.active=dev

# Database Configuration
spring.datasource.url=jdbc:mysql://${MYSQLHOST}:${MYSQLPORT}/${MYSQLDATABASE}?serverTimezone=UTC
spring.datasource.username=${MYSQLUSER}
spring.datasource.password=${MYSQLPASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Firebase Configuration
firebase.serviceAccountKey=${FIREBASE_SERVICE_ACCOUNT_KEY}
firebase.project.id=${FIREBASE_PROJECT_ID}

# External API Configuration
exchange.rate.api-key=${EXCHANGE_RATE_API_KEY}
exchange.rate.base-url=https://v6.exchangerate-api.com/v6
lambda.api.key=${LAMBDA_API_KEY}

# Common JPA Configuration
spring.jpa.open-in-view=true

# Flyway Configuration (Common)
spring.flyway.enabled=true
spring.flyway.baseline-version=0
spring.flyway.locations=classpath:db/migration

# Flyway Configuration (Environment Specific - see profile properties)
# Dev: baseline-on-migrate=true, validate-on-migrate=false, out-of-order=true
# Prod: baseline-on-migrate=false, validate-on-migrate=true, out-of-order=false

# Virtual Threads Configuration (Java 21+)
spring.threads.virtual.enabled=true

# Performance Optimization
spring.main.lazy-initialization=true
spring.jmx.enabled=false

# Logging Configuration
logging.level.org.springframework.core.env=INFO
logging.level.org.springframework.boot.context.config=INFO

# Resilience4j Retry Configuration
resilience4j.retry.instances.exchangeRateApi.max-attempts=3
resilience4j.retry.instances.exchangeRateApi.wait-duration=1s
resilience4j.retry.instances.exchangeRateApi.enable-exponential-backoff=true
resilience4j.retry.instances.exchangeRateApi.exponential-backoff-multiplier=2
resilience4j.retry.instances.exchangeRateApi.retry-exceptions=org.springframework.web.client.RestClientException

# SpringDoc OpenAPI Configuration
springdoc.api-docs.path=/v3/api-docs
springdoc.api-docs.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=${SWAGGER_UI_ENABLED:false}
springdoc.show-actuator=false
springdoc.default-produces-media-type=application/json
springdoc.default-consumes-media-type=application/json