# ===========================
# Observability Configuration
# ===========================
# This file contains settings for metrics, tracing, and monitoring.
# Include this in application.properties with: spring.config.import=classpath:application-observability.properties

# ===========================
# Actuator Endpoints
# ===========================
# Expose health and metrics endpoints for monitoring
management.endpoints.web.exposure.include=health,metrics,prometheus
management.endpoint.health.enabled=true
management.endpoint.metrics.enabled=true
management.endpoint.prometheus.enabled=true

# Health endpoint details
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# Railway Optimization: Disable DB health check for fast liveness probe
# This prevents cold sleep by ensuring health check responds quickly
management.health.db.enabled=false

# ===========================
# Metrics Configuration
# ===========================
# Enable Prometheus metrics export
management.metrics.export.prometheus.enabled=true

# Add common tags to all metrics
management.metrics.tags.application=tateca-backend
management.metrics.tags.environment=${spring.profiles.active:dev}

# Enable JVM metrics
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.system=true

# Enable Tomcat metrics
management.metrics.enable.tomcat=true

# Enable database connection pool metrics (HikariCP)
management.metrics.enable.hikaricp=true

# ===========================
# Distributed Tracing
# ===========================
# Disabled by default - enable in Phase 3 if needed
management.tracing.enabled=false
management.tracing.sampling.probability=0.0

# ===========================
# Observations
# ===========================
# Enable observation annotations (@Timed, @Counted)
management.observations.annotations.enabled=true

# ===========================
# Logging Configuration
# ===========================
# Correlation ID pattern (for traceId/spanId)
logging.pattern.level=%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]

# ===========================
# Database Monitoring
# ===========================
# Enable Hibernate statistics (development only)
# Production: Disabled to reduce overhead
spring.jpa.properties.hibernate.generate_statistics=false

# Log slow queries (> 1 second)
spring.jpa.properties.hibernate.session.events.log.LOG_QUERIES_SLOWER_THAN_MS=1000
